{% extends "base.html" %}

{% block content %}
<div class="mdc-layout-grid">
  <div class="mdc-layout-grid__inner">
    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
      <h1 class="mdc-typography--headline4">Configurações</h1>
    </div>

    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
      <div class="mdc-card">
        <div class="mdc-card__primary">
          <h2 class="mdc-typography--headline5">Configurações</h2>
        </div>
        <div class="mdc-card__content">
          <form method="POST" action="{{ url_for('main.change_api_key') }}" class="mdc-form-field">
            {{ form.csrf_token }}
            <div class="mdc-text-field mdc-text-field--outlined" data-mdc-auto-init="MDCTextField">
              <input type="text" class="mdc-text-field__input" name="openai_api_key" value="{{ openai_api_key }}" required>
              <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                  <label class="mdc-floating-label">Chave da API OpenAI</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
              </div>
            </div>
            <div class="mdc-text-field-helper-line">
              <div class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent">
                Sua chave de API da OpenAI
              </div>
            </div>

            <div class="mdc-text-field mdc-text-field--outlined" data-mdc-auto-init="MDCTextField" style="margin-top: 16px;">
              <input type="text" class="mdc-text-field__input" name="other_api_key" value="{{ other_api_key }}">
              <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                  <label class="mdc-floating-label">Outra Chave de API (opcional)</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
              </div>
            </div>

            <div class="mdc-card__actions">
              <div class="mdc-card__action-buttons">
                <button type="submit" class="mdc-button mdc-button--raised mdc-button--touch">
                  <span class="mdc-button__ripple"></span>
                  <span class="mdc-button__label">Salvar Configurações</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Inicializa os componentes MDC
  const textFields = document.querySelectorAll('.mdc-text-field');
  textFields.forEach(textField => {
    mdc.textField.MDCTextField.attachTo(textField);
  });

  const buttons = document.querySelectorAll('.mdc-button');
  buttons.forEach(button => {
    mdc.ripple.MDCRipple.attachTo(button);
  });
</script>
{% endblock %} 